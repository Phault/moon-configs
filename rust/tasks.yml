fileGroups:
  sources:
    - 'Cargo.toml'
    - 'src/**/*'
  tests:
    - 'benches/**/*'
    - 'tests/**/*'
  misc:
    - '.cargo/**/*'
    - 'rust-toolchain'
    - 'rust-toolchain.toml'

tasks:
  build:
    command: 'cargo build'
    inputs:
      - '@globs(sources)'
  dev:
    command: 'cargo run'
    inputs:
      - '@globs(sources)'
    local: true
  format:
    command: 'cargo fmt --all --check'
    inputs:
      - '@globs(sources)'
      - '@globs(tests)'
      - 'Cargo.toml'
  lint:
    command: 'cargo clippy --workspace --all-targets'
    inputs:
      - '@globs(sources)'
      - '@globs(tests)'
      - 'Cargo.toml'
  test:
    command: 'cargo test --workspace'
    inputs:
      - '@globs(sources)'
      - '@globs(tests)'
      - 'Cargo.toml'
  typecheck:
    command: 'cargo check --workspace'
    inputs:
      - '@globs(sources)'
      - '@globs(tests)'
      - 'Cargo.toml'
